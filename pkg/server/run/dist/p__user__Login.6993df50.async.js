(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(P){P.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},19319:function(P,O,s){"use strict";s.r(O);var ae=s(18106),p=s(63885),ne=s(34792),E=s(48086),d=s(39428),j=s(11849),c=s(3182),B=s(2824),te=s(17462),W=s(76772),K=s(36108),b=s(48107),S=s(39464),N=s(89366),C=s(2603),H=s(29985),L=s(67294),z=s(70469),v=s(5966),$=s(16434),G=s(63434),t=s(97363),V=s(71390),x=s(70994),Y=s(34687),l=s.n(Y),e=s(85893),I=function(h){var m=h.content;return(0,e.jsx)(W.Z,{style:{marginBottom:24},message:m,type:"error",showIcon:!0})},J=function(){var h=(0,L.useState)({}),m=(0,B.Z)(h,2),T=m[0],X=m[1],w=(0,L.useState)("account"),U=(0,B.Z)(w,2),D=U[0],k=U[1],A=(0,t.tT)("@@initialState"),f=A.initialState,q=A.setInitialState,u=(0,t.YB)(),ee=function(){var g=(0,c.Z)((0,d.Z)().mark(function i(){var _,n;return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f==null||(_=f.fetchUserInfo)===null||_===void 0?void 0:_.call(f);case 2:if(n=a.sent,!n){a.next=6;break}return a.next=6,q(function(M){return(0,j.Z)((0,j.Z)({},M),{},{currentUser:n})});case 6:case"end":return a.stop()}},i)}));return function(){return g.apply(this,arguments)}}(),se=function(){var g=(0,c.Z)((0,d.Z)().mark(function i(_){var n,o,a,M,y,R;return(0,d.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,x.x4)("userid=12345&type=1");case 3:if(n=r.sent,n.data!==void 0&&(n.status="ok",n.currentAuthority="admin",localStorage.setItem("token",n.data)),n.status!=="ok"){r.next=16;break}return o=u.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),E.default.success(o),r.next=10,ee();case 10:if(t.m8){r.next=12;break}return r.abrupt("return");case 12:return a=t.m8.location.query,M=a,y=M.redirect,t.m8.push(y||"/"),r.abrupt("return");case 16:console.log(n),X(n),r.next=24;break;case 20:r.prev=20,r.t0=r.catch(0),R=u.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),E.default.error(R);case 24:case"end":return r.stop()}},i,null,[[0,20]])}));return function(_){return g.apply(this,arguments)}}(),Z=T.status,F=T.type;return(0,e.jsxs)("div",{className:l().container,children:[(0,e.jsx)("div",{className:l().lang,"data-lang":!0,children:t.pD&&(0,e.jsx)(t.pD,{})}),(0,e.jsx)("div",{className:l().content,children:(0,e.jsxs)(z.U,{logo:(0,e.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"Admin View",subTitle:u.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[(0,e.jsx)(t._H,{id:"pages.login.loginWith",defaultMessage:"\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F"},"loginWith"),(0,e.jsx)(K.Z,{className:l().icon},"AlipayCircleOutlined"),(0,e.jsx)(b.Z,{className:l().icon},"TaobaoCircleOutlined"),(0,e.jsx)(S.Z,{className:l().icon},"WeiboCircleOutlined")],onFinish:function(){var g=(0,c.Z)((0,d.Z)().mark(function i(_){return(0,d.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,se(_);case 2:case"end":return o.stop()}},i)}));return function(i){return g.apply(this,arguments)}}(),children:[(0,e.jsxs)(p.Z,{activeKey:D,onChange:k,children:[(0,e.jsx)(p.Z.TabPane,{tab:u.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"})},"account"),(0,e.jsx)(p.Z.TabPane,{tab:u.formatMessage({id:"pages.login.phoneLogin.tab",defaultMessage:"\u624B\u673A\u53F7\u767B\u5F55"})},"mobile")]}),Z==="error"&&F==="account"&&(0,e.jsx)(I,{content:u.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),D==="account"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.Z,{name:"username",fieldProps:{size:"large",prefix:(0,e.jsx)(N.Z,{className:l().prefixIcon})},placeholder:u.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,e.jsx)(v.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,e.jsx)(C.Z,{className:l().prefixIcon})},placeholder:u.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),Z==="error"&&F==="mobile"&&(0,e.jsx)(I,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),D==="mobile"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(H.Z,{className:l().prefixIcon})},name:"mobile",placeholder:u.formatMessage({id:"pages.login.phoneNumber.placeholder",defaultMessage:"\u624B\u673A\u53F7"}),rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.phoneNumber.required",defaultMessage:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01"})},{pattern:/^1\d{10}$/,message:(0,e.jsx)(t._H,{id:"pages.login.phoneNumber.invalid",defaultMessage:"\u624B\u673A\u53F7\u683C\u5F0F\u9519\u8BEF\uFF01"})}]}),(0,e.jsx)($.Z,{fieldProps:{size:"large",prefix:(0,e.jsx)(C.Z,{className:l().prefixIcon})},captchaProps:{size:"large"},placeholder:u.formatMessage({id:"pages.login.captcha.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"}),captchaTextRender:function(i,_){return i?"".concat(_," ").concat(u.formatMessage({id:"pages.getCaptchaSecondText",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})):u.formatMessage({id:"pages.login.phoneLogin.getVerificationCode",defaultMessage:"\u83B7\u53D6\u9A8C\u8BC1\u7801"})},name:"captcha",rules:[{required:!0,message:(0,e.jsx)(t._H,{id:"pages.login.captcha.required",defaultMessage:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01"})}],onGetCaptcha:function(){var g=(0,c.Z)((0,d.Z)().mark(function i(_){var n;return(0,d.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,x.mJ)({phone:_});case 2:if(n=a.sent,n!==!1){a.next=5;break}return a.abrupt("return");case 5:E.default.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return a.stop()}},i)}));return function(i){return g.apply(this,arguments)}}()})]}),(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)(G.Z,{noStyle:!0,name:"autoLogin",children:(0,e.jsx)(t._H,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,e.jsx)("a",{style:{float:"right"},children:(0,e.jsx)(t._H,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,e.jsx)(V.Z,{})]})};O.default=J}}]);
