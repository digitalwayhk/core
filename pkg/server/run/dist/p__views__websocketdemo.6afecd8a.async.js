(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[852],{11051:function(C,t,o){"use strict";o.r(t);var l=o(32059),_=o(2824),c=o(67294),v=o(37676),E=o(85893);t.default=function(){var u,S=(0,c.useState)("wss://echo.websocket.org"),s=(0,_.Z)(S,2),n=s[0],r=s[1],a=(0,c.useState)([]),i=(0,_.Z)(a,2),e=i[0],d=i[1],h=(0,v.ZP)(n),f=h.sendMessage,b=h.lastMessage,g=h.readyState;(0,c.useEffect)(function(){b!==null&&d(function(T){return T.concat(b)})},[b,d]);var m=(0,c.useCallback)(function(){return r("wss://demos.kaazing.com/echo")},[]),O=(0,c.useCallback)(function(){return f("Hello")},[]),y=(u={},(0,l.Z)(u,v.kQ.CONNECTING,"Connecting"),(0,l.Z)(u,v.kQ.OPEN,"Open"),(0,l.Z)(u,v.kQ.CLOSING,"Closing"),(0,l.Z)(u,v.kQ.CLOSED,"Closed"),(0,l.Z)(u,v.kQ.UNINSTANTIATED,"Uninstantiated"),u)[g];return(0,E.jsxs)("div",{children:[(0,E.jsx)("button",{onClick:m,children:"Click Me to change Socket Url"}),(0,E.jsx)("button",{onClick:O,disabled:g!==v.kQ.OPEN,children:"Click Me to send 'Hello'"}),(0,E.jsxs)("span",{children:["The WebSocket is currently ",y]}),b?(0,E.jsxs)("span",{children:["Last message: ",b.data]}):null,(0,E.jsx)("ul",{children:e.map(function(T,L){return(0,E.jsx)("span",{children:T?T.data:null},L)})})]})}},37676:function(C,t,o){"use strict";var l;l={value:!0};var _=o(91835);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return _.useWebSocket}});var c=o(66548);l={enumerable:!0,get:function(){return c.useSocketIO}};var v=o(51581);Object.defineProperty(t,"kQ",{enumerable:!0,get:function(){return v.ReadyState}});var E=o(69448);l={enumerable:!0,get:function(){return E.useEventSource}};var u=o(49885);l={enumerable:!0,get:function(){return u.resetGlobalState}}},73682:function(C,t,o){"use strict";var l=this&&this.__assign||function(){return l=Object.assign||function(n){for(var r,a=1,i=arguments.length;a<i;a++){r=arguments[a];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},l.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachListeners=void 0;var _=o(21787),c=o(51581),v=o(49885),E=function(n,r,a){n.onmessage=function(i){r.current.onMessage&&r.current.onMessage(i),!(typeof r.current.filter=="function"&&r.current.filter(i)!==!0)&&a(i)}},u=function(n,r,a,i){n.onopen=function(e){r.current.onOpen&&r.current.onOpen(e),i.current=0,a(c.ReadyState.OPEN)}},S=function(n,r,a,i,e){if(c.isEventSourceSupported&&n instanceof EventSource)return function(){};v.assertIsWebSocket(n);var d;return n.onclose=function(h){var f,b;if(r.current.onClose&&r.current.onClose(h),a(c.ReadyState.CLOSED),r.current.shouldReconnect&&r.current.shouldReconnect(h)){var g=(f=r.current.reconnectAttempts)!==null&&f!==void 0?f:c.DEFAULT_RECONNECT_LIMIT;e.current<g?d=window.setTimeout(function(){e.current++,i()},(b=r.current.reconnectInterval)!==null&&b!==void 0?b:c.DEFAULT_RECONNECT_INTERVAL_MS):(r.current.onReconnectStop&&r.current.onReconnectStop(g),console.warn("Max reconnect attempts of "+g+" exceeded"))}},function(){return d&&window.clearTimeout(d)}},s=function(n,r,a,i,e){var d;return n.onerror=function(h){var f,b;r.current.onError&&r.current.onError(h),c.isEventSourceSupported&&n instanceof EventSource&&(r.current.onClose&&r.current.onClose(l(l({},h),{code:1006,reason:"An error occurred with the EventSource: "+h,wasClean:!1})),a(c.ReadyState.CLOSED),n.close()),r.current.retryOnError&&(e.current<((f=r.current.reconnectAttempts)!==null&&f!==void 0?f:c.DEFAULT_RECONNECT_LIMIT)?d=window.setTimeout(function(){e.current++,i()},(b=r.current.reconnectInterval)!==null&&b!==void 0?b:c.DEFAULT_RECONNECT_INTERVAL_MS):(r.current.onReconnectStop&&r.current.onReconnectStop(r.current.reconnectAttempts),console.warn("Max reconnect attempts of "+r.current.reconnectAttempts+" exceeded")))},function(){return d&&window.clearTimeout(d)}};t.attachListeners=function(n,r,a,i,e,d){var h=r.setLastMessage,f=r.setReadyState,b,g,m;return a.current.fromSocketIO&&(b=_.setUpSocketIOPing(d)),E(n,a,h),u(n,a,f,e),g=S(n,a,f,i,e),m=s(n,a,f,i,e),function(){f(c.ReadyState.CLOSING),g(),m(),n.close(),b&&clearInterval(b)}}},77678:function(C,t,o){"use strict";var l=this&&this.__assign||function(){return l=Object.assign||function(r){for(var a,i=1,e=arguments.length;i<e;i++){a=arguments[i];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(r[d]=a[d])}return r},l.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.attachSharedListeners=void 0;var _=o(64401),c=o(51581),v=o(14480),E=o(21787),u=function(r,a){r.onmessage=function(i){v.getSubscribers(a).forEach(function(e){e.optionsRef.current.onMessage&&e.optionsRef.current.onMessage(i),!(typeof e.optionsRef.current.filter=="function"&&e.optionsRef.current.filter(i)!==!0)&&e.setLastMessage(i)})}},S=function(r,a){r.onopen=function(i){v.getSubscribers(a).forEach(function(e){e.reconnectCount.current=0,e.optionsRef.current.onOpen&&e.optionsRef.current.onOpen(i),e.setReadyState(c.ReadyState.OPEN)})}},s=function(r,a){r instanceof WebSocket&&(r.onclose=function(i){v.getSubscribers(a).forEach(function(e){e.optionsRef.current.onClose&&e.optionsRef.current.onClose(i),e.setReadyState(c.ReadyState.CLOSED)}),delete _.sharedWebSockets[a],v.getSubscribers(a).forEach(function(e){var d,h;if(e.optionsRef.current.shouldReconnect&&e.optionsRef.current.shouldReconnect(i)){var f=(d=e.optionsRef.current.reconnectAttempts)!==null&&d!==void 0?d:c.DEFAULT_RECONNECT_LIMIT;e.reconnectCount.current<f?setTimeout(function(){e.reconnectCount.current++,e.reconnect.current()},(h=e.optionsRef.current.reconnectInterval)!==null&&h!==void 0?h:c.DEFAULT_RECONNECT_INTERVAL_MS):(e.optionsRef.current.onReconnectStop&&e.optionsRef.current.onReconnectStop(e.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of "+f+" exceeded"))}})})},n=function(r,a){r.onerror=function(i){v.getSubscribers(a).forEach(function(e){e.optionsRef.current.onError&&e.optionsRef.current.onError(i),c.isEventSourceSupported&&r instanceof EventSource&&(e.optionsRef.current.onClose&&e.optionsRef.current.onClose(l(l({},i),{code:1006,reason:"An error occurred with the EventSource: "+i,wasClean:!1})),e.setReadyState(c.ReadyState.CLOSED))}),c.isEventSourceSupported&&r instanceof EventSource&&r.close()}};t.attachSharedListeners=function(r,a,i,e){var d;return i.current.fromSocketIO&&(d=E.setUpSocketIOPing(e)),u(r,a),s(r,a),S(r,a),n(r,a),function(){d&&clearInterval(d)}}},51581:function(C,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEventSourceSupported=t.isReactNative=t.ReadyState=t.UNPARSABLE_JSON_OBJECT=t.DEFAULT_RECONNECT_INTERVAL_MS=t.DEFAULT_RECONNECT_LIMIT=t.SOCKET_IO_PING_CODE=t.SOCKET_IO_PATH=t.SOCKET_IO_PING_INTERVAL=t.DEFAULT_EVENT_SOURCE_OPTIONS=t.EMPTY_EVENT_HANDLERS=t.DEFAULT_OPTIONS=void 0;var o=1,l=1e3*o;t.DEFAULT_OPTIONS={},t.EMPTY_EVENT_HANDLERS={},t.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:t.EMPTY_EVENT_HANDLERS},t.SOCKET_IO_PING_INTERVAL=25*l,t.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",t.SOCKET_IO_PING_CODE="2",t.DEFAULT_RECONNECT_LIMIT=20,t.DEFAULT_RECONNECT_INTERVAL_MS=5e3,t.UNPARSABLE_JSON_OBJECT={};var _;(function(v){v[v.UNINSTANTIATED=-1]="UNINSTANTIATED",v[v.CONNECTING=0]="CONNECTING",v[v.OPEN=1]="OPEN",v[v.CLOSING=2]="CLOSING",v[v.CLOSED=3]="CLOSED"})(_=t.ReadyState||(t.ReadyState={}));var c=function(){try{return"EventSource"in globalThis}catch(v){return!1}};t.isReactNative=typeof navigator!="undefined"&&navigator.product==="ReactNative",t.isEventSourceSupported=!t.isReactNative&&c()},23758:function(C,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createOrJoinSocket=void 0;var l=o(64401),_=o(51581),c=o(73682),v=o(77678),E=o(14480),u=function(S,s,n,r,a){return function(){if(E.removeSubscriber(S,s),!E.hasSubscribers(S)){try{var i=l.sharedWebSockets[S];i instanceof WebSocket&&(i.onclose=function(e){n.current.onClose&&n.current.onClose(e),r(_.ReadyState.CLOSED)}),i.close()}catch(e){}a&&a(),delete l.sharedWebSockets[S]}}};t.createOrJoinSocket=function(S,s,n,r,a,i,e,d){if(!_.isEventSourceSupported&&r.current.eventSourceOptions)throw _.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(r.current.share){var h=null;l.sharedWebSockets[s]===void 0?(l.sharedWebSockets[s]=r.current.eventSourceOptions?new EventSource(s,r.current.eventSourceOptions):new WebSocket(s,r.current.protocols),S.current=l.sharedWebSockets[s],n(_.ReadyState.CONNECTING),h=v.attachSharedListeners(l.sharedWebSockets[s],s,r,d)):(S.current=l.sharedWebSockets[s],n(l.sharedWebSockets[s].readyState));var f={setLastMessage:a,setReadyState:n,optionsRef:r,reconnectCount:e,reconnect:i};return E.addSubscriber(s,f),u(s,f,r,n,h)}else{if(S.current=r.current.eventSourceOptions?new EventSource(s,r.current.eventSourceOptions):new WebSocket(s,r.current.protocols),n(_.ReadyState.CONNECTING),!S.current)throw new Error("WebSocket failed to be created");return c.attachListeners(S.current,{setLastMessage:a,setReadyState:n},r,i.current,e,d)}}},46974:function(C,t,o){"use strict";var l=this&&this.__awaiter||function(v,E,u,S){function s(n){return n instanceof u?n:new u(function(r){r(n)})}return new(u||(u=Promise))(function(n,r){function a(d){try{e(S.next(d))}catch(h){r(h)}}function i(d){try{e(S.throw(d))}catch(h){r(h)}}function e(d){d.done?n(d.value):s(d.value).then(a,i)}e((S=S.apply(v,E||[])).next())})},_=this&&this.__generator||function(v,E){var u={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},S,s,n,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(d){return i([e,d])}}function i(e){if(S)throw new TypeError("Generator is already executing.");for(;u;)try{if(S=1,s&&(n=e[0]&2?s.return:e[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,e[1])).done)return n;switch(s=0,n&&(e=[e[0]&2,n.value]),e[0]){case 0:case 1:n=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,s=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(n=u.trys,!(n=n.length>0&&n[n.length-1])&&(e[0]===6||e[0]===2)){u=0;continue}if(e[0]===3&&(!n||e[1]>n[0]&&e[1]<n[3])){u.label=e[1];break}if(e[0]===6&&u.label<n[1]){u.label=n[1],n=e;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(e);break}n[2]&&u.ops.pop(),u.trys.pop();continue}e=E.call(v,u)}catch(d){e=[6,d],s=0}finally{S=n=0}if(e[0]&5)throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=void 0;var c=o(21787);t.getUrl=function(v,E){return l(void 0,void 0,void 0,function(){var u,S,s;return _(this,function(n){switch(n.label){case 0:return typeof v!="function"?[3,2]:[4,v()];case 1:return u=n.sent(),[3,3];case 2:u=v,n.label=3;case 3:return S=E.current.fromSocketIO?c.parseSocketIOUrl(u):u,s=E.current.queryParams?c.appendQueryParams(S,E.current.queryParams):S,[2,s]}})})}},64401:function(C,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetWebSockets=t.sharedWebSockets=void 0,t.sharedWebSockets={},t.resetWebSockets=function(o){if(o&&t.sharedWebSockets.hasOwnProperty(o))delete t.sharedWebSockets[o];else for(var l in t.sharedWebSockets)t.sharedWebSockets.hasOwnProperty(l)&&delete t.sharedWebSockets[l]}},14480:function(C,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetSubscribers=t.removeSubscriber=t.addSubscriber=t.hasSubscribers=t.getSubscribers=void 0;var o={},l=[];t.getSubscribers=function(_){return t.hasSubscribers(_)?Array.from(o[_]):l},t.hasSubscribers=function(_){var c;return((c=o[_])===null||c===void 0?void 0:c.size)>0},t.addSubscriber=function(_,c){o[_]=o[_]||new Set,o[_].add(c)},t.removeSubscriber=function(_,c){o[_].delete(c)},t.resetSubscribers=function(_){if(_&&o.hasOwnProperty(_))delete o[_];else for(var c in o)o.hasOwnProperty(c)&&delete o[c]}},54387:function(C,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.websocketWrapper=void 0,t.websocketWrapper=function(o,l){return new Proxy(o,{get:function(_,c){var v=_[c];return c==="reconnect"?l:typeof v=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):v},set:function(_,c,v){return/^on/.test(c)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(_[c]=v,!0)}})},t.default=t.websocketWrapper},21787:function(C,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setUpSocketIOPing=t.appendQueryParams=t.parseSocketIOUrl=void 0;var l=o(51581);t.parseSocketIOUrl=function(_){if(_){var c=/^https|wss/.test(_),v=_.replace(/^(https?|wss?)(:\/\/)?/,""),E=v.replace(/\/$/,""),u=c?"wss":"ws";return u+"://"+E+l.SOCKET_IO_PATH}else if(_===""){var c=/^https/.test(window.location.protocol),u=c?"wss":"ws",S=window.location.port?":"+window.location.port:"";return u+"://"+window.location.hostname+S+l.SOCKET_IO_PATH}return _},t.appendQueryParams=function(_,c){c===void 0&&(c={});var v=/\?([\w]+=[\w]+)/,E=v.test(_),u=""+Object.entries(c).reduce(function(S,s){var n=s[0],r=s[1];return S+(n+"="+r+"&")},"").slice(0,-1);return""+_+(E?"&":"?")+u},t.setUpSocketIOPing=function(_,c){c===void 0&&(c=l.SOCKET_IO_PING_INTERVAL);var v=function(){return _(l.SOCKET_IO_PING_CODE)};return setInterval(v,c)}},69448:function(C,t,o){"use strict";var l=this&&this.__assign||function(){return l=Object.assign||function(u){for(var S,s=1,n=arguments.length;s<n;s++){S=arguments[s];for(var r in S)Object.prototype.hasOwnProperty.call(S,r)&&(u[r]=S[r])}return u},l.apply(this,arguments)},_=this&&this.__rest||function(u,S){var s={};for(var n in u)Object.prototype.hasOwnProperty.call(u,n)&&S.indexOf(n)<0&&(s[n]=u[n]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(u);r<n.length;r++)S.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(u,n[r])&&(s[n[r]]=u[n[r]]);return s};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var c=o(67294),v=o(91835),E=o(51581);t.useEventSource=function(u,S,s){S===void 0&&(S=E.DEFAULT_EVENT_SOURCE_OPTIONS),s===void 0&&(s=!0);var n=S.withCredentials,r=S.events,a=_(S,["withCredentials","events"]),i=l(l({},a),{eventSourceOptions:{withCredentials:n}}),e=c.useRef(E.EMPTY_EVENT_HANDLERS);r&&(e.current=r);var d=v.useWebSocket(u,i,s),h=d.lastMessage,f=d.readyState,b=d.getWebSocket;return c.useEffect(function(){(h==null?void 0:h.type)&&Object.entries(e.current).forEach(function(g){var m=g[0],O=g[1];m===h.type&&O(h)})},[h]),{lastEvent:h,readyState:f,getEventSource:b}}},66548:function(C,t,o){"use strict";var l=this&&this.__assign||function(){return l=Object.assign||function(S){for(var s,n=1,r=arguments.length;n<r;n++){s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(S[a]=s[a])}return S},l.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var _=o(67294),c=o(91835),v=o(51581),E={type:"empty",payload:null},u=function(S){if(!S||!S.data)return E;var s=S.data.match(/\[.*]/);if(!s)return E;var n=JSON.parse(s);return!Array.isArray(n)||!n[1]?E:{type:n[0],payload:n[1]}};t.useSocketIO=function(S,s,n){s===void 0&&(s=v.DEFAULT_OPTIONS),n===void 0&&(n=!0);var r=_.useMemo(function(){return l(l({},s),{fromSocketIO:!0})},[]),a=c.useWebSocket(S,r,n),i=a.sendMessage,e=a.sendJsonMessage,d=a.lastMessage,h=a.readyState,f=a.getWebSocket,b=_.useMemo(function(){return u(d)},[d]);return{sendMessage:i,sendJsonMessage:e,lastMessage:b,lastJsonMessage:b,readyState:h,getWebSocket:f}}},91835:function(C,t,o){"use strict";var l=this&&this.__assign||function(){return l=Object.assign||function(a){for(var i,e=1,d=arguments.length;e<d;e++){i=arguments[e];for(var h in i)Object.prototype.hasOwnProperty.call(i,h)&&(a[h]=i[h])}return a},l.apply(this,arguments)},_=this&&this.__awaiter||function(a,i,e,d){function h(f){return f instanceof e?f:new e(function(b){b(f)})}return new(e||(e=Promise))(function(f,b){function g(y){try{O(d.next(y))}catch(T){b(T)}}function m(y){try{O(d.throw(y))}catch(T){b(T)}}function O(y){y.done?f(y.value):h(y.value).then(g,m)}O((d=d.apply(a,i||[])).next())})},c=this&&this.__generator||function(a,i){var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},d,h,f,b;return b={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function g(O){return function(y){return m([O,y])}}function m(O){if(d)throw new TypeError("Generator is already executing.");for(;e;)try{if(d=1,h&&(f=O[0]&2?h.return:O[0]?h.throw||((f=h.return)&&f.call(h),0):h.next)&&!(f=f.call(h,O[1])).done)return f;switch(h=0,f&&(O=[O[0]&2,f.value]),O[0]){case 0:case 1:f=O;break;case 4:return e.label++,{value:O[1],done:!1};case 5:e.label++,h=O[1],O=[0];continue;case 7:O=e.ops.pop(),e.trys.pop();continue;default:if(f=e.trys,!(f=f.length>0&&f[f.length-1])&&(O[0]===6||O[0]===2)){e=0;continue}if(O[0]===3&&(!f||O[1]>f[0]&&O[1]<f[3])){e.label=O[1];break}if(O[0]===6&&e.label<f[1]){e.label=f[1],f=O;break}if(f&&e.label<f[2]){e.label=f[2],e.ops.push(O);break}f[2]&&e.ops.pop(),e.trys.pop();continue}O=i.call(a,e)}catch(y){O=[6,y],h=0}finally{d=f=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},v=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.useWebSocket=void 0;var E=o(67294),u=o(51581),S=o(23758),s=o(46974),n=v(o(54387)),r=o(49885);t.useWebSocket=function(a,i,e){i===void 0&&(i=u.DEFAULT_OPTIONS),e===void 0&&(e=!0);var d=E.useState(null),h=d[0],f=d[1],b=E.useState({}),g=b[0],m=b[1],O=E.useMemo(function(){if(h)try{return JSON.parse(h.data)}catch(N){return u.UNPARSABLE_JSON_OBJECT}return null},[h]),y=E.useRef(null),T=E.useRef(null),L=E.useRef(function(){}),j=E.useRef(0),p=E.useRef([]),P=E.useRef(null),A=E.useRef(i);A.current=i;var R=y.current&&g[y.current]!==void 0?g[y.current]:a!==null&&e===!0?u.ReadyState.CONNECTING:u.ReadyState.UNINSTANTIATED,J=i.queryParams?JSON.stringify(i.queryParams):null,I=E.useCallback(function(N,M){var k;if(M===void 0&&(M=!0),u.isEventSourceSupported&&T.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((k=T.current)===null||k===void 0?void 0:k.readyState)===u.ReadyState.OPEN?(r.assertIsWebSocket(T.current),T.current.send(N)):M&&p.current.push(N)},[]),F=E.useCallback(function(N,M){M===void 0&&(M=!0),I(JSON.stringify(N),M)},[I]),K=E.useCallback(function(){return A.current.share!==!0||u.isEventSourceSupported&&T.current instanceof EventSource?T.current:(P.current===null&&T.current&&(r.assertIsWebSocket(T.current),P.current=n.default(T.current,L)),P.current)},[]);return E.useEffect(function(){if(a!==null&&e===!0){var N,M=!1,k=function(){return _(void 0,void 0,void 0,function(){var W,w,G;return c(this,function(H){switch(H.label){case 0:return W=y,[4,s.getUrl(a,A)];case 1:return W.current=H.sent(),w=function(D){M||f(D)},G=function(D){M||m(function(V){var U;return l(l({},V),y.current&&(U={},U[y.current]=D,U))})},N=S.createOrJoinSocket(T,y.current,G,A,w,L,j,I),[2]}})})};return L.current=function(){M||(P.current&&(P.current=null),N==null||N(),k())},k(),function(){M=!0,P.current&&(P.current=null),N==null||N(),f(null)}}else(a===null||e===!1)&&(j.current=0,m(function(W){var w;return l(l({},W),y.current&&(w={},w[y.current]=u.ReadyState.CLOSED,w))}))},[a,e,J,I]),E.useEffect(function(){R===u.ReadyState.OPEN&&p.current.splice(0).forEach(function(N){I(N)})},[R]),{sendMessage:I,sendJsonMessage:F,lastMessage:h,lastJsonMessage:O,readyState:R,getWebSocket:K}}},49885:function(C,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetGlobalState=t.assertIsWebSocket=void 0;var l=o(64401),_=o(14480);function c(E){if(!(E instanceof WebSocket))throw new Error("")}t.assertIsWebSocket=c;function v(E){_.resetSubscribers(E),l.resetWebSockets(E)}t.resetGlobalState=v}}]);
