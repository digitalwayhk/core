(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["2856cd5d"],{"655cd127":function(e,t,l){l.d(t,"__esModule",{value:!0}),l.e(t,{default:function(){return e4;}});var a=l("777fffbe"),r=l("852bbaa9"),o=l("1dda0c16"),s=l("6e3566fd"),n=r._(s),i=l("90ea153d"),d=a._(i),c=l("c1890b93"),u=a._(c),h=l("7dc1d35c"),x=a._(h),f=l("682f84e5"),g=a._(f),m=l("04463b55"),p=a._(m),b=l("33e07b31"),v=a._(b),C=l("fc4f973e"),j=a._(C),y=l("a3e2d47f"),S=a._(y),k=l("122b1322"),$=a._(k),P=l("8007f4eb"),T=a._(P),F=l("90c5995c"),E=a._(F);let R=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,w=(e,t,l=2)=>parseFloat((Math.random()*(t-e)+e).toFixed(l)),Q=(e=10)=>Array.from({length:e},()=>R(50,500)),N=(e,t)=>{let l=["GET","POST","PUT","DELETE"],a=["/api/users","/api/products","/api/orders","/api/auth","/api/search"];return{serviceName:e,path:a[t%a.length],method:l[t%l.length],currentQPS:R(50,300),maxQPS:R(300,800),avgQPS:w(100,400),totalRequests:R(1e3,1e4),totalErrors:R(0,100),errorRate:w(0,5),minResponseTime:`${R(10,50)}ms`,maxResponseTime:`${R(200,1e3)}ms`,avgResponseTime:`${R(50,300)}ms`,cacheHits:R(500,5e3),cacheMisses:R(100,1e3),cacheHitRate:w(70,95),cacheSize:R(1e3,1e4),qpsHistory:Q(),websocket:Math.random()>.5?{connections:R(10,100),messages:R(1e3,1e4),errors:R(0,20)}:void 0,uptime:`${R(1,30)}\u{5929}${R(0,23)}\u{5C0F}\u{65F6}${R(0,59)}\u{5206}\u{949F}`,startTime:new Date(Date.now()-R(864e5,2592e6)).toISOString()};},H=e=>{let t=Array.from({length:R(5,15)},(t,l)=>N(e,l)),l=t.reduce((e,t)=>e+t.totalRequests,0),a=t.reduce((e,t)=>e+t.totalErrors,0),r=t.reduce((e,t)=>e+t.currentQPS,0),o=r/t.length,s=Math.max(...t.map(e=>e.maxQPS)),n=t.reduce((e,t)=>e+t.cacheHits,0),i=t.reduce((e,t)=>e+t.cacheMisses,0),d=t.some(e=>e.websocket);return{serviceName:e,totalRouters:t.length,publicRouters:R(2,t.length),privateRouters:R(1,t.length-2),manageRouters:R(1,3),totalRequests:l,totalErrors:a,totalQPS:r,avgQPS:o,maxQPS:s,totalCacheHits:n,totalCacheMisses:i,totalWSConnections:d?R(20,200):0,totalWSMessages:d?R(1e3,2e4):0,totalWSErrors:d?R(0,50):0,routers:t,collectedAt:new Date().toISOString()};},D=[H("\u7528\u6237\u670D\u52A1"),H("\u8BA2\u5355\u670D\u52A1"),H("\u5546\u54C1\u670D\u52A1"),H("\u652F\u4ED8\u670D\u52A1"),H("\u901A\u77E5\u670D\u52A1")];var _=l("0fbf6a42"),M=a._(_),q=l("2cd7fa71"),B=l("005b8f38"),W=l("947119aa"),I=l("a2ed7825"),A=l("fb7f230b");l("166ecaa2");var z=l("4a187f71"),L=a._(z),O=l("d63f3740"),K=l("d5448336"),U=a._(K),G=l("cb9d6495"),V=l("44f2e78b"),X=l("9250f984"),J=l("1a52d00c"),Y=l("fa7f3640"),Z=l("07716bd1"),ee=l("bc2359a8");let et=e=>{let{paddingXXS:t,lineWidth:l,tagPaddingHorizontal:a,componentCls:r,calc:o}=e,s=o(a).sub(l).equal(),n=o(t).sub(l).equal();return{[r]:{...(0,Y.resetComponent)(e),display:"inline-block",height:"auto",paddingInline:s,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",backgroundColor:e.defaultBg,border:`${(0,G.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${r}-close-icon`]:{marginInlineStart:n,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive},"&-disabled":{cursor:"not-allowed",[`&:not(${r}-checkable-checked)`]:{color:e.colorTextDisabled,"&:hover":{backgroundColor:"transparent"}},[`&${r}-checkable-checked`]:{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled},"&:hover, &:active":{backgroundColor:e.colorBgContainerDisabled,color:e.colorTextDisabled},[`&:not(${r}-checkable-checked):hover`]:{color:e.colorTextDisabled}},"&-group":{display:"flex",flexWrap:"wrap",gap:e.paddingXS}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:s}},[`&${e.componentCls}-solid`]:{borderColor:"transparent",color:e.colorTextLightSolid,backgroundColor:e.colorBgSolid,[`&${r}-default`]:{color:e.solidTextColor}},[`${r}-filled`]:{borderColor:"transparent",backgroundColor:e.tagBorderlessBg},[`&${r}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",backgroundColor:e.colorBgContainerDisabled,a:{cursor:"not-allowed",pointerEvents:"none",color:e.colorTextDisabled,"&:hover":{color:e.colorTextDisabled}},"a&":{"&:hover, &:active":{color:e.colorTextDisabled}},[`&${r}-outlined`]:{borderColor:e.colorBorderDisabled},[`&${r}-solid, &${r}-filled`]:{color:e.colorTextDisabled,[`${r}-close-icon`]:{color:e.colorTextDisabled}},[`${r}-close-icon`]:{cursor:"not-allowed",color:e.colorTextDisabled,"&:hover":{color:e.colorTextDisabled}}}};},el=e=>{let{lineWidth:t,fontSizeIcon:l,calc:a}=e,r=e.fontSizeSM;return(0,ee.mergeToken)(e,{tagFontSize:r,tagLineHeight:(0,G.unit)(a(e.lineHeightSM).mul(r).equal()),tagIconSize:a(l).sub(a(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg});},ea=e=>{let t=(0,J.isBright)(new X.AggregationColor(e.colorBgSolid),"#fff")?"#000":"#fff";return{defaultBg:new V.FastColor(e.colorFillTertiary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText,solidTextColor:t};};var er=(0,Z.genStyleHooks)("Tag",e=>et(el(e)),ea);let eo=n.forwardRef((e,t)=>{let{prefixCls:l,style:a,className:r,checked:o,children:s,icon:i,onChange:d,onClick:c,disabled:u,...h}=e,{getPrefixCls:x,tag:f}=n.useContext(O.ConfigContext),g=n.useContext(U.default),m=u??g,p=x("tag",l),[b,v]=er(p),C=(0,B.clsx)(p,`${p}-checkable`,{[`${p}-checkable-checked`]:o,[`${p}-checkable-disabled`]:m},null==f?void 0:f.className,r,b,v);return n.createElement("span",{...h,ref:t,style:{...a,...null==f?void 0:f.style},className:C,onClick:e=>{m||(null==d||d(!o),null==c||c(e));}},i,n.createElement("span",null,s));});var es=l("a238f4d1"),en=a._(es),ei=l("17ed996a"),ed=a._(ei),ec=l("38ffe6d7"),eu=a._(ec);let eh=n.default.forwardRef((e,t)=>{let{id:l,prefixCls:a,rootClassName:r,className:o,style:s,classNames:i,styles:d,disabled:c,options:u,value:h,defaultValue:x,onChange:f,multiple:g,...m}=e,{getPrefixCls:p,direction:b,className:v,style:C,classNames:j,styles:y}=(0,O.useComponentConfig)("tag"),S=p("tag",a),k=`${S}-checkable-group`,$=(0,eu.default)(S),[P,T]=er(S,$),[F,E]=(0,I.useMergeSemantic)([j,i],[y,d],{props:e}),R=(0,n.useMemo)(()=>Array.isArray(u)?u.map(e=>e&&"object"==typeof e?e:{value:e,label:e}):[],[u]),[w,Q]=(0,q.useControlledState)(x,h),N=(e,t)=>{let l=null;if(g){let a=w||[];l=e?[].concat((0,en.default)(a),[t.value]):a.filter(e=>e!==t.value);}else l=e?t.value:null;Q(l),null==f||f(l);},H=n.default.useRef(null);(0,n.useImperativeHandle)(t,()=>({nativeElement:H.current}));let D=(0,ed.default)(m,{aria:!0,data:!0});return n.default.createElement("div",{...D,className:(0,B.clsx)(k,v,r,{[`${k}-disabled`]:c,[`${k}-rtl`]:"rtl"===b},P,T,o,F.root),style:{...C,...E.root,...s},id:l,ref:H},R.map(e=>n.default.createElement(eo,{key:e.value,className:(0,B.clsx)(`${k}-item`,F.item),style:E.item,checked:g?(w||[]).includes(e.value):w===e.value,onChange:t=>N(t,e),disabled:c},e.label)));});var ex=l("edfc0bd1"),ef=l("c7544f50");let eg=e=>(0,ef.genPresetColor)(e,(t,{textColor:l,lightBorderColor:a,lightColor:r,darkColor:o})=>({[`${e.componentCls}${e.componentCls}-${t}:not(${e.componentCls}-disabled)`]:{[`&${e.componentCls}-outlined`]:{backgroundColor:r,borderColor:a,color:l},[`&${e.componentCls}-solid`]:{backgroundColor:o,borderColor:o,color:e.colorTextLightSolid},[`&${e.componentCls}-filled`]:{backgroundColor:r,color:l}}}));var em=(0,ef.genSubStyleComponent)(["Tag","preset"],e=>eg(el(e)),ea);let ep=(e,t,l)=>{let a="string"!=typeof l?l:l.charAt(0).toUpperCase()+l.slice(1);return{[`${e.componentCls}${e.componentCls}-${t}:not(${e.componentCls}-disabled)`]:{[`&${e.componentCls}-outlined`]:{backgroundColor:e[`color${a}Bg`],borderColor:e[`color${a}Border`],color:e[`color${l}`]},[`&${e.componentCls}-solid`]:{backgroundColor:e[`color${l}`],borderColor:e[`color${l}`]},[`&${e.componentCls}-filled`]:{backgroundColor:e[`color${a}Bg`],color:e[`color${l}`]}}};};var eb=(0,Z.genSubStyleComponent)(["Tag","status"],e=>{let t=el(e);return[ep(t,"success","Success"),ep(t,"processing","Info"),ep(t,"error","Error"),ep(t,"warning","Warning")];},ea);let ev=n.forwardRef((e,t)=>{var l;let{prefixCls:a,className:r,rootClassName:o,style:s,children:i,icon:d,color:c,variant:u,onClose:h,bordered:x,disabled:f,href:g,target:m,styles:p,classNames:b,...v}=e,{getPrefixCls:C,direction:j,className:y,variant:S,style:k,classNames:$,styles:P}=(0,O.useComponentConfig)("tag"),[T,F,E,R,w]=function(e,t){let{color:l,variant:a,bordered:r}=e;return n.useMemo(()=>{let e;let o=null==l?void 0:l.endsWith("-inverse");e=a||(o?"solid":!1===r?"filled":t||"filled");let s=o?null==l?void 0:l.replace("-inverse",""):l,n=(0,ex.isPresetColor)(l),i=(0,ex.isPresetStatusColor)(l),d={};if(!n&&!i&&s){if("solid"===e)d.backgroundColor=l;else{let t=new V.FastColor(s).toHsl();t.l=.95,d.backgroundColor=new V.FastColor(t).toHexString(),d.color=l,"outlined"===e&&(d.borderColor=l);}}return[e,s,n,i,d];},[l,a,r,t]);}(e,S),Q=E||R,N=n.useContext(U.default),H=f??N,{tag:D}=n.useContext(O.ConfigContext),[_,M]=n.useState(!0),z=(0,q.omit)(v,["closeIcon","closable"]),K={...e,color:F,variant:T,disabled:H,href:g,target:m,icon:d},[G,X]=(0,I.useMergeSemantic)([$,b],[P,p],{props:K}),J=n.useMemo(()=>{let e={...X.root,...k,...s};return H||(e={...w,...e}),e;},[X.root,k,s,w,H]),Y=C("tag",a),[Z,ee]=er(Y),et=(0,B.clsx)(Y,y,G.root,`${Y}-${T}`,{[`${Y}-${F}`]:Q,[`${Y}-hidden`]:!_,[`${Y}-rtl`]:"rtl"===j,[`${Y}-disabled`]:H},r,o,Z,ee),el=e=>{!H&&(e.stopPropagation(),null==h||h(e),e.defaultPrevented||M(!1));},[,ea]=(0,W.useClosable)((0,W.pickClosable)(e),(0,W.pickClosable)(D),{closable:!1,closeIconRender:e=>{let t=n.createElement("span",{className:`${Y}-close-icon`,onClick:el},e);return(0,A.replaceElement)(e,t,e=>({onClick:t=>{var l;null==e||null===(l=e.onClick)||void 0===l||l.call(e,t),el(t);},className:(0,B.clsx)(null==e?void 0:e.className,`${Y}-close-icon`)}));}}),eo="function"==typeof v.onClick||i&&"a"===i.type,es=(0,A.cloneElement)(d,{className:(0,B.clsx)(n.isValidElement(d)?null===(l=d.props)||void 0===l?void 0:l.className:void 0,G.icon),style:X.icon}),en=es?n.createElement(n.Fragment,null,es,i&&n.createElement("span",{className:G.content,style:X.content},i)):i,ei=n.createElement(g?"a":"span",{...z,ref:t,className:et,style:J,href:H?void 0:g,target:m,onClick:H?void 0:z.onClick,...g&&H?{"aria-disabled":!0}:{}},en,ea,E&&n.createElement(em,{key:"preset",prefixCls:Y}),R&&n.createElement(eb,{key:"status",prefixCls:Y}));return eo?n.createElement(L.default,{component:"Tag"},ei):ei;});ev.CheckableTag=eo,ev.CheckableTagGroup=eh;let eC=({data:e,loading:t,type:l,onServiceDetail:a})=>{let r=[{title:"\u670D\u52A1\u540D\u79F0",dataIndex:"serviceName",key:"serviceName"},{title:"\u8DEF\u5F84",dataIndex:"path",key:"path"},{title:"\u65B9\u6CD5",dataIndex:"method",key:"method",render:e=>(0,o.jsx)(ev,{color:"GET"===e?"green":"POST"===e?"blue":"PUT"===e?"orange":"red",children:e})},{title:"\u5F53\u524DQPS",dataIndex:"currentQPS",key:"currentQPS",sorter:(e,t)=>e.currentQPS-t.currentQPS},{title:"\u5E73\u5747QPS",dataIndex:"avgQPS",key:"avgQPS",sorter:(e,t)=>e.avgQPS-t.avgQPS},{title:"\u6700\u5927QPS",dataIndex:"maxQPS",key:"maxQPS",sorter:(e,t)=>e.maxQPS-t.maxQPS},{title:"\u603B\u8BF7\u6C42\u6570",dataIndex:"totalRequests",key:"totalRequests",sorter:(e,t)=>e.totalRequests-t.totalRequests},{title:"\u9519\u8BEF\u6570",dataIndex:"totalErrors",key:"totalErrors",sorter:(e,t)=>e.totalErrors-t.totalErrors},{title:"\u9519\u8BEF\u7387",dataIndex:"errorRate",key:"errorRate",render:e=>`${e.toFixed(2)}%`,sorter:(e,t)=>e.errorRate-t.errorRate},{title:"\u7F13\u5B58\u547D\u4E2D\u7387",dataIndex:"cacheHitRate",key:"cacheHitRate",render:e=>`${e.toFixed(2)}%`,sorter:(e,t)=>e.cacheHitRate-t.cacheHitRate},{title:"\u64CD\u4F5C",key:"action",fixed:"right",render:(e,t)=>(0,o.jsx)(g.default,{type:"link",onClick:()=>a&&a(t.serviceName),children:"\u8BE6\u7EC6\u4FE1\u606F"})}];return Array.isArray(e)&&"router"===l&&e.map(e=>({...e,key:`${e.serviceName}-${e.path}-${e.method}`})),(0,o.jsx)(M.default,{columns:r,dataSource:e,loading:t,rowKey:"key",pagination:{pageSize:10},scroll:{x:1300}});};var ej=l("95f2367f"),ey=l("2d9af956"),eS=a._(ey),ek=l("7bd8b35e"),e$=a._(ek),eP=l("69db35bc"),eT=a._(eP),eF=l("caca162f"),eE=a._(eF),eR=l("b2b30127"),ew=a._(eR),eQ=l("79e0af3c"),eN=a._(eQ),eH=l("56296091"),eD=a._(eH),e_=l("278430cb"),eM=l("752ff3ec"),eq=a._(eM);let eB={xs:24,sm:12,md:12,lg:12,xl:4,style:{marginBottom:24}},eW=({loading:e,visitData:t,overallStats:l})=>{let{styles:a}=(0,eD.default)();return(0,o.jsxs)(eE.default,{gutter:24,children:[(0,o.jsx)(e$.default,{titlePlacement:"start",style:{margin:"16px"},children:"\u670D\u52A1\u7EDF\u8BA1"}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsxs)(e_.ChartCard,{bordered:!1,title:"\u670D\u52A1\u603B\u6570",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),loading:e,total:()=>l.totalServices,footer:(0,o.jsx)(e_.Field,{label:"\u8FD0\u884C\u72B6\u6001",value:`\u{6B63}\u{5E38}`}),contentHeight:46,children:[(0,o.jsxs)(eq.default,{flag:"up",style:{marginRight:16},children:["\u5468\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"12%"})]}),(0,o.jsxs)(eq.default,{flag:"down",children:["\u65E5\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"11%"})]})]})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsx)(e_.ChartCard,{bordered:!1,loading:e,title:"\u603B\u8BF7\u6C42\u6570",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:(0,eN.default)(l.totalRequests).format("0,0"),footer:(0,o.jsx)(e_.Field,{label:"\u65E5\u8BBF\u95EE\u91CF",value:(0,eN.default)(1234).format("0,0")}),contentHeight:46,children:(0,o.jsx)(ej.Area,{xField:"x",yField:"y",shapeField:"smooth",height:46,axis:!1,style:{fill:"linear-gradient(-90deg, white 0%, #975FE4 100%)",fillOpacity:.6,width:"100%"},padding:-20,data:t})})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsx)(e_.ChartCard,{bordered:!1,loading:e,title:"\u6700\u5927QPS",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:(0,eN.default)(8560).format("0,0"),footer:(0,o.jsx)(e_.Field,{label:"\u65E5\u540C\u6BD4",value:"0.34%"}),contentHeight:46,children:(0,o.jsx)(ej.Column,{xField:"x",yField:"y",padding:-20,axis:!1,height:46,data:t,scale:{x:{paddingInner:.4}}})})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsx)(e_.ChartCard,{bordered:!1,loading:e,title:"\u5E73\u5747QPS",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:(0,eN.default)(l.avgQPS.toFixed(2)).format("0,0"),footer:(0,o.jsx)(e_.Field,{label:"\u65E5\u540C\u6BD4",value:"0.34%"}),contentHeight:46,children:(0,o.jsx)(ej.Column,{xField:"x",yField:"y",padding:-20,axis:!1,height:46,data:t,scale:{x:{paddingInner:.4}}})})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsx)(e_.ChartCard,{loading:e,bordered:!1,title:"\u603B\u9519\u8BEF\u6570",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:l.totalErrors,footer:(0,o.jsxs)("div",{style:{whiteSpace:"nowrap",overflow:"hidden"},children:[(0,o.jsxs)(eq.default,{flag:"up",style:{marginRight:16},children:["\u5468\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"12%"})]}),(0,o.jsxs)(eq.default,{flag:"down",children:["\u65E5\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"11%"})]})]}),contentHeight:46,children:(0,o.jsx)(eT.default,{percent:2,strokeColor:{from:"#108ee9",to:"#87d068"},status:"active"})})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsx)(e_.ChartCard,{loading:e,bordered:!1,title:"\u7F13\u5B58\u547D\u4E2D\u7387",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:l.cacheHitRate.toFixed(2),footer:(0,o.jsxs)("div",{style:{whiteSpace:"nowrap",overflow:"hidden"},children:[(0,o.jsxs)(eq.default,{flag:"up",style:{marginRight:16},children:["\u5468\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"12%"})]}),(0,o.jsxs)(eq.default,{flag:"down",children:["\u65E5\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"11%"})]})]}),contentHeight:46,children:(0,o.jsx)(eT.default,{percent:l.cacheHitRate.toFixed(2),strokeColor:{from:"#108ee9",to:"#87d068"},status:"active"})})}),(0,o.jsx)(e$.default,{titlePlacement:"start",style:{margin:"16px"},children:"WebSocket \u7EDF\u8BA1"}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsxs)(e_.ChartCard,{bordered:!1,title:"\u603B\u94FE\u63A5\u6570",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),loading:e,total:()=>l.totalWSConnections,footer:(0,o.jsx)(e_.Field,{label:"\u8FD0\u884C\u72B6\u6001",value:""}),contentHeight:46,children:[(0,o.jsxs)(eq.default,{flag:"up",style:{marginRight:16},children:["\u5468\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"12%"})]}),(0,o.jsxs)(eq.default,{flag:"down",children:["\u65E5\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"11%"})]})]})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsx)(e_.ChartCard,{bordered:!1,loading:e,title:"\u603B\u6D88\u606F\u6570",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:(0,eN.default)(l.totalWSMessages).format("0,0"),footer:(0,o.jsx)(e_.Field,{label:"\u65E5\u8BBF\u95EE\u91CF",value:(0,eN.default)(1234).format("0,0")}),contentHeight:46,children:(0,o.jsx)(ej.Area,{xField:"x",yField:"y",shapeField:"smooth",height:46,axis:!1,style:{fill:"linear-gradient(-90deg, white 0%, #975FE4 100%)",fillOpacity:.6,width:"100%"},padding:-20,data:t})})}),(0,o.jsx)(eS.default,{...eB,children:(0,o.jsxs)(e_.ChartCard,{bordered:!1,loading:e,title:"\u603B\u9519\u8BEF\u6570",action:(0,o.jsx)(ew.default,{title:"\u6307\u6807\u8BF4\u660E",children:(0,o.jsx)(E.default,{})}),total:(0,eN.default)(l.totalWSErrors).format("0,0"),footer:(0,o.jsx)(e_.Field,{label:"\u65E5\u540C\u6BD4",value:"0.34%"}),contentHeight:46,children:[(0,o.jsxs)(eq.default,{flag:"up",style:{marginRight:16},children:["\u5468\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"12%"})]}),(0,o.jsxs)(eq.default,{flag:"down",children:["\u65E5\u540C\u6BD4",(0,o.jsx)("span",{className:a.trendText,children:"11%"})]})]})})]});};var eI=l("1711f983"),eA=l("215810bf"),ez=l("fb726300"),eL=l("ce0780be"),eO=a._(eL),eK=l("8a193048"),eU=a._(eK);let{RangePicker:eG}=eO.default,eV=[];for(let e=0;e<7;e+=1)eV.push({title:`Market ${e} `,total:323234});let eX=({data:e,currentTabKey:t})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eE.default,{gutter:8,style:{width:138},children:(0,o.jsx)(eS.default,{span:24,children:(0,o.jsx)(eU.default,{style:{},title:e.serviceName,subTitle:(e.avgQPS/(e.maxQPS?e.maxQPS:1)*100).toFixed(2)+"%",gap:2,total:`${100*e.cvr}%`,theme:t!==e.serviceName?"light":void 0})})}),(0,o.jsx)(eE.default,{gutter:8,style:{width:138},children:(0,o.jsx)(eS.default,{span:24,style:{},children:e.avgQPS?(0,o.jsx)(ez.Tiny.Ring,{height:60,width:60,percent:e.avgQPS/(e.maxQPS?e.maxQPS:1),color:["#E8EEF4","#5FABF4"]}):(0,o.jsx)(ez.Tiny.Ring,{height:60,width:60,percent:1,color:["#E8EEF4"]})})})]}),eJ=({rangePickerValue:e,salesData:t,isActive:l,handleRangePickerChange:a,loading:r,selectDate:s})=>{let{styles:n}=(0,eD.default)();return console.log({salesData:t}),(0,o.jsx)(d.default,{loading:r,variant:"borderless",styles:{body:{padding:r?24:0}},children:(0,o.jsx)(v.default,{className:n.salesCard,tabBarExtraContent:(0,o.jsxs)("div",{className:n.salesExtraWrap,children:[(0,o.jsxs)("div",{className:n.salesExtra,children:[(0,o.jsx)(g.default,{type:"text",className:l("today"),onClick:()=>s("today"),children:"\u4ECA\u65E5"}),(0,o.jsx)(g.default,{type:"text",className:l("week"),onClick:()=>s("week"),children:"\u672C\u5468"}),(0,o.jsx)(g.default,{type:"text",className:l("month"),onClick:()=>s("month"),children:"\u672C\u6708"}),(0,o.jsx)(g.default,{type:"text",className:l("year"),onClick:()=>s("year"),children:"\u672C\u5E74"})]}),(0,o.jsx)(eG,{value:e,onChange:a,variant:"filled",style:{width:256}})]}),size:"large",tabBarStyle:{marginBottom:24},items:[{key:"sales",label:"QPS\u8D8B\u52BF",children:(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(eE.default,{children:(0,o.jsx)(eS.default,{xl:24,lg:24,md:24,sm:24,xs:24,children:(0,o.jsx)("div",{className:n.salesBar,children:(0,o.jsx)(ej.Line,{height:300,data:t,xField:"index",yField:"qps",colorField:"name",seriesField:"name",paddingBottom:12,axis:{x:{title:!1},y:{title:!1,labelFill:"#fff",gridLineDash:null,gridStroke:"#fff"}},legend:{color:{itemLabelFill:"#fff"}},scale:{x:{paddingInner:.4}},tooltip:{name:"\u4EA4\u6613\u989D",channel:"y"}})})})})})}]})});};var eY=l("d87e5ab1");let{Title:eZ,Text:e0}=x.default,e1=e=>e.replace(/_([a-z])/g,(e,t)=>t.toUpperCase()).replace(/Qps\b/g,"QPS").replace(/Ws\b/g,"WS"),e2=e=>Array.isArray(e)?e.map(e2):e&&"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,t])=>[e1(e),e2(t)])):e,e4=()=>{let[e,t]=(0,n.useState)(!0),[l,a]=(0,n.useState)(null),[r,s]=(0,n.useState)([]),{data:i}=(0,eI.useRequest)(eA.fakeChartData),[c,h]=(0,n.useState)(!0);async function x(){let e=await (0,eY.getService)(),t=await Promise.all(e.map(e=>(0,eY.getServiceStats)(e.Name))),l=t.filter(e=>null==e?void 0:e.data).map(e=>e2(e.data)).flat();return console.log(l),s(l),t;}if((0,n.useEffect)(()=>{c?x():s(D),t(!1);},[c]),l){console.log({service:l});let t=(e=>{if(!e)return null;let{totalRequests:t,totalCacheHits:l,totalCacheMisses:a,totalRouters:r,maxQPS:o,avgQPS:s,totalErrors:n,totalWSConnections:i,totalWSMessages:d,totalWSErrors:c}=e;return{totalServices:r,totalRequests:t,maxQPS:o,avgQPS:s,totalErrors:n,cacheHitRate:a+l>0?l/(a+l)*100:0,totalWSConnections:i,totalWSMessages:d,totalWSErrors:c};})(l),r=l.routers.flatMap(e=>(e.qpsHistory??[]).map((t,l)=>({name:e.path,index:l,qps:t})));return(0,o.jsx)("div",{children:(0,o.jsxs)(u.default,{orientation:"vertical",size:"large",style:{width:"100%"},children:[(0,o.jsx)(d.default,{children:(0,o.jsxs)(u.default,{align:"center",style:{width:"100%",justifyContent:"space-between"},children:[(0,o.jsxs)(u.default,{children:[(0,o.jsx)(g.default,{icon:(0,o.jsx)(T.default,{}),onClick:()=>{a(null);},children:"\u8FD4\u56DE\u603B\u89C8"}),(0,o.jsxs)(eZ,{level:4,style:{margin:0},children:[l.serviceName," \u8BE6\u7EC6\u76D1\u63A7"]})]}),(0,o.jsxs)(e0,{type:"secondary",children:["\u66F4\u65B0\u65F6\u95F4: ",new Date(l.collectedAt).toLocaleString()]})]})}),t&&(0,o.jsx)(eW,{loading:e,overallStats:t,visitData:(null==i?void 0:i.visitData)||[]}),(0,o.jsx)(d.default,{children:(0,o.jsx)(v.default,{activeKey:"sad",items:l.routers.map(e=>({key:e.path,label:(0,o.jsx)(eX,{data:{...e,serviceName:e.path},currentTabKey:""})}))})}),(0,o.jsx)(eJ,{loading:e,salesData:r,rangePickerValue:null,isActive:()=>"",handleRangePickerChange:()=>{},selectDate:()=>{}}),(0,o.jsxs)(d.default,{children:[(0,o.jsxs)(eZ,{level:5,style:{marginTop:0},children:[(0,o.jsx)($.default,{})," \u8DEF\u7531\u8BE6\u60C5"]}),(0,o.jsx)(eC,{data:l.routers.map(e=>{var t,l;return{...e,maxQPS:parseFloat(null===(t=e.maxQPS)||void 0===t?void 0:t.toFixed(2)),avgQPS:parseFloat(null===(l=e.avgQPS)||void 0===l?void 0:l.toFixed(2))};}),loading:e,type:"router"})]})]})});}let f=0===r.length?null:{totalServices:r.length,totalRequests:r.reduce((e,t)=>e+t.totalRequests,0),maxQPS:Math.max(...r.map(e=>e.totalQPS)),avgQPS:r.reduce((e,t)=>e+t.avgQPS,0)/r.length,totalErrors:r.reduce((e,t)=>e+t.totalErrors,0),cacheHitRate:r.reduce((e,t)=>t.totalCacheHits+t.totalCacheMisses>0?t.totalCacheHits/(t.totalCacheHits+t.totalCacheMisses)*100:0,0)/r.length,totalWSConnections:r.reduce((e,t)=>e+t.totalWSConnections,0),totalWSMessages:r.reduce((e,t)=>e+t.totalWSMessages,0),totalWSErrors:r.reduce((e,t)=>e+t.totalWSErrors,0)},m=(()=>{if(0===r.length)return[];let e=[];return r.forEach(t=>{t.routers.length>0&&t.routers[0].qpsHistory&&t.routers[0].qpsHistory.forEach((l,a)=>{e.push({name:t.serviceName,qps:l,index:a,type:"\u5F53\u524DQPS"});}),e.push({name:t.serviceName,qps:t.maxQPS,index:t.routers.length>0&&t.routers[0].qpsHistory?t.routers[0].qpsHistory.length:0,type:"\u6700\u5927QPS"});}),e;})(),b=r.map(e=>{var t,l;return{key:e.serviceName,serviceName:e.serviceName,totalRouters:e.totalRouters,totalRequests:e.totalRequests,totalQPS:e.totalQPS,avgQPS:parseFloat(null===(t=e.avgQPS)||void 0===t?void 0:t.toFixed(2)),maxQPS:parseFloat(null===(l=e.maxQPS)||void 0===l?void 0:l.toFixed(2)),totalErrors:e.totalErrors,errorRate:e.totalRequests>0?parseFloat((e.totalErrors/e.totalRequests*100).toFixed(2)):0,cacheHitRate:e.totalCacheHits>0?parseFloat((e.totalCacheHits/(e.totalCacheHits+e.totalCacheMisses)*100).toFixed(2)):0,totalWSConnections:e.totalWSConnections,totalWSMessages:e.totalWSMessages,totalWSErrors:e.totalWSErrors};});return(0,o.jsx)(p.default,{spinning:e,children:(0,o.jsxs)(u.default,{orientation:"vertical",size:"large",style:{width:"100%"},children:[(0,o.jsx)(d.default,{children:(0,o.jsxs)(j.default,{justify:"space-between",align:"center",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)(eZ,{level:4,style:{margin:0},children:[(0,o.jsx)(S.default,{})," \u7CFB\u7EDF\u76D1\u63A7\u603B\u89C8"]}),(0,o.jsx)(e0,{type:"secondary",children:"\u5B9E\u65F6\u76D1\u63A7\u7CFB\u7EDF\u5404\u670D\u52A1\u8FD0\u884C\u72B6\u6001"})]}),(0,o.jsx)(g.default,{type:"text",icon:(0,o.jsx)(E.default,{}),onClick:()=>h(!c)})]})}),f&&(0,o.jsx)(eW,{loading:e,overallStats:f,visitData:(null==i?void 0:i.visitData)||[]}),(0,o.jsx)(d.default,{children:(0,o.jsx)(v.default,{activeKey:"sad",items:r.map(e=>({key:e.serviceName,label:(0,o.jsx)(eX,{data:e,currentTabKey:""})}))})}),(0,o.jsx)(eJ,{loading:e,salesData:m,rangePickerValue:null,isActive:()=>"",handleRangePickerChange:()=>{},selectDate:()=>{}}),(0,o.jsxs)(d.default,{children:[(0,o.jsxs)(eZ,{level:5,style:{marginTop:0},children:[(0,o.jsx)($.default,{})," \u670D\u52A1\u8BE6\u60C5"]}),(0,o.jsx)(eC,{data:b,loading:e,type:"service",onServiceDetail:e=>{let t=r.find(t=>t.serviceName===e);t&&a(t);}})]})]})});};}}]);
//# sourceMappingURL=2856cd5d-async.488a8375.js.map